<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>منصة التعليم الجزائري - الطور الثانوي</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: {
              50: '#f3f3ff',
              100: '#e9e9ff',
              200: '#d7d7ff',
              300: '#b8b7ff',
              400: '#918eff',
              500: '#7069fa',
              600: '#5D5CDE', // الأساسي
              700: '#4946c5',
              800: '#3f3aa0',
              900: '#343380'
            },
            secondary: '#F4F9FF',
            dark: {
              primary: '#5D5CDE',
              secondary: '#252836',
              background: '#181818'
            }
          },
          fontFamily: {
            'sans': ['Segoe UI', 'Tahoma', 'sans-serif']
          },
          animation: {
            'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
            'bounce-slow': 'bounce 3s infinite',
            'slide-in': 'slideIn 0.5s ease-out forwards',
            'fade-in': 'fadeIn 0.5s ease-out forwards',
            'scale-in': 'scaleIn 0.3s ease-out forwards',
            'float': 'float 6s ease-in-out infinite',
            'wave': 'wave 2s linear infinite'
          },
          keyframes: {
            slideIn: {
              '0%': { transform: 'translateY(20px)', opacity: '0' },
              '100%': { transform: 'translateY(0)', opacity: '1' }
            },
            fadeIn: {
              '0%': { opacity: '0' },
              '100%': { opacity: '1' }
            },
            scaleIn: {
              '0%': { transform: 'scale(0.95)', opacity: '0' },
              '100%': { transform: 'scale(1)', opacity: '1' }
            },
            float: {
              '0%, 100%': { transform: 'translateY(0)' },
              '50%': { transform: 'translateY(-10px)' }
            },
            wave: {
              '0%': { transform: 'rotate(0deg)' },
              '10%': { transform: 'rotate(14deg)' },
              '20%': { transform: 'rotate(-8deg)' },
              '30%': { transform: 'rotate(14deg)' },
              '40%': { transform: 'rotate(-4deg)' },
              '50%': { transform: 'rotate(10deg)' },
              '60%': { transform: 'rotate(0deg)' },
              '100%': { transform: 'rotate(0deg)' }
            }
          }
        },
      }
    }
  </script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap');
    
    :root {
      --primary-color: #5D5CDE;
      --secondary-color: #F4F9FF;
      --highlight-color: #FFB800;
      --success-color: #00C853;
      --warning-color: #FF9800;
      --danger-color: #F44336;
      --info-color: #03A9F4;
    }
    
    body {
      font-family: 'Tajawal', 'Segoe UI', Tahoma, sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
    }
    
    .dark body {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
    }
    
    .icon-subjects {
      transition: all 0.3s ease;
      transform-origin: center;
    }
    
    .icon-subjects:hover {
      transform: scale(1.15);
    }
    
    .card-hover {
      transition: all 0.3s ease;
    }
    
    .card-hover:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px -5px rgba(93, 92, 222, 0.3);
    }
    
    .grade-card {
      background-size: 100% 100%;
      background-position: center;
      transition: all 0.3s ease;
    }
    
    .grade-card:hover .grade-title {
      transform: translateY(-5px);
    }
    
    .grade-title {
      transition: transform 0.3s ease;
    }
    
    /* Customized scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    
    ::-webkit-scrollbar-track {
      background: rgba(0, 0, 0, 0.05);
      border-radius: 10px;
    }
    
    ::-webkit-scrollbar-thumb {
      background: var(--primary-color);
      border-radius: 10px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: #4946c5;
    }
    
    .dark ::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.05);
    }
    
    /* Custom animations for the search results */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .search-result-item {
      animation: fadeInUp 0.3s ease forwards;
      animation-fill-mode: both;
    }
    
    .search-result-item:nth-child(1) { animation-delay: 0.05s; }
    .search-result-item:nth-child(2) { animation-delay: 0.1s; }
    .search-result-item:nth-child(3) { animation-delay: 0.15s; }
    .search-result-item:nth-child(4) { animation-delay: 0.2s; }
    .search-result-item:nth-child(5) { animation-delay: 0.25s; }
    .search-result-item:nth-child(6) { animation-delay: 0.3s; }
    .search-result-item:nth-child(7) { animation-delay: 0.35s; }
    .search-result-item:nth-child(8) { animation-delay: 0.4s; }
    .search-result-item:nth-child(9) { animation-delay: 0.45s; }
    .search-result-item:nth-child(10) { animation-delay: 0.5s; }
    
    /* أنماط للأيقونات التفاعلية */
    .subject-icon {
      width: 40px;
      height: 40px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: all 0.3s ease;
    }
    
    .subject-icon.math { background-color: rgba(103, 58, 183, 0.2); color: #673AB7; }
    .subject-icon.arabic { background-color: rgba(233, 30, 99, 0.2); color: #E91E63; }
    .subject-icon.islamic { background-color: rgba(0, 150, 136, 0.2); color: #009688; }
    .subject-icon.civil { background-color: rgba(255, 152, 0, 0.2); color: #FF9800; }
    .subject-icon.science { background-color: rgba(33, 150, 243, 0.2); color: #2196F3; }
    .subject-icon.history { background-color: rgba(121, 85, 72, 0.2); color: #795548; }
    .subject-icon.art { background-color: rgba(233, 30, 99, 0.2); color: #E91E63; }
    .subject-icon.music { background-color: rgba(156, 39, 176, 0.2); color: #9C27B0; }
    .subject-icon.english { background-color: rgba(76, 175, 80, 0.2); color: #4CAF50; }
    .subject-icon.french { background-color: rgba(3, 169, 244, 0.2); color: #03A9F4; }
    .subject-icon.folder { background-color: rgba(255, 193, 7, 0.2); color: #FFC107; }
    .subject-icon.doc { background-color: rgba(63, 81, 181, 0.2); color: #3F51B5; }
    .subject-icon.test { background-color: rgba(244, 67, 54, 0.2); color: #F44336; }
    .subject-icon.homework { background-color: rgba(0, 188, 212, 0.2); color: #00BCD4; }
    .subject-icon.physics { background-color: rgba(255, 87, 34, 0.2); color: #FF5722; }
    .subject-icon.biology { background-color: rgba(0, 200, 83, 0.2); color: #00C853; }
    .subject-icon.chemistry { background-color: rgba(255, 87, 34, 0.2); color: #FF5722; }
    .subject-icon.philosophy { background-color: rgba(96, 125, 139, 0.2); color: #607D8B; }
    .subject-icon.economy { background-color: rgba(158, 158, 158, 0.2); color: #9E9E9E; }
    
    .dark .subject-icon.math { background-color: rgba(103, 58, 183, 0.3); }
    .dark .subject-icon.arabic { background-color: rgba(233, 30, 99, 0.3); }
    .dark .subject-icon.islamic { background-color: rgba(0, 150, 136, 0.3); }
    .dark .subject-icon.science { background-color: rgba(33, 150, 243, 0.3); }
    .dark .subject-icon.civil { background-color: rgba(255, 152, 0, 0.3); }
    .dark .subject-icon.history { background-color: rgba(121, 85, 72, 0.3); }
    .dark .subject-icon.art { background-color: rgba(233, 30, 99, 0.3); }
    .dark .subject-icon.music { background-color: rgba(156, 39, 176, 0.3); }
    .dark .subject-icon.english { background-color: rgba(76, 175, 80, 0.3); }
    .dark .subject-icon.french { background-color: rgba(3, 169, 244, 0.3); }
    .dark .subject-icon.folder { background-color: rgba(255, 193, 7, 0.3); }
    .dark .subject-icon.doc { background-color: rgba(63, 81, 181, 0.3); }
    .dark .subject-icon.test { background-color: rgba(244, 67, 54, 0.3); }
    .dark .subject-icon.homework { background-color: rgba(0, 188, 212, 0.3); }
    .dark .subject-icon.physics { background-color: rgba(121, 85, 72, 0.3); }
    .dark .subject-icon.biology { background-color: rgba(0, 200, 83, 0.3); }
    .dark .subject-icon.chemistry { background-color: rgba(255, 87, 34, 0.3); }
    .dark .subject-icon.philosophy { background-color: rgba(96, 125, 139, 0.3); }
    .dark .subject-icon.economy { background-color: rgba(158, 158, 158, 0.3); }
    
    .subject-icon:hover {
      transform: scale(1.2);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
    }
    
    /* التحولات المتدرجة */
    .grade-card {
      position: relative;
      overflow: hidden;
    }
    
    .grade-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
      transform: translateX(-100%);
      transition: transform 0.6s ease;
    }
    
    .grade-card:hover::before {
      transform: translateX(100%);
    }
    
    /* خلفيات الصفوف الدراسية المميزة */
    .grade-1 {
      background: linear-gradient(45deg, #3949AB, #1E88E5);
    }
    
    .grade-2 {
      background: linear-gradient(45deg, #00897B, #26A69A);
    }
    
    .grade-3 {
      background: linear-gradient(45deg, #7B1FA2, #9C27B0);
    }
    
    .stream-science {
      background: linear-gradient(45deg, #00ACC1, #26C6DA);
    }
    
    .stream-lit {
      background: linear-gradient(45deg, #F4511E, #FF7043);
    }
    
    .stream-math {
      background: linear-gradient(45deg, #5E35B1, #7E57C2);
    }
    
    .stream-tech {
      background: linear-gradient(45deg, #0097A7, #00BCD4);
    }
    
    .stream-management {
      background: linear-gradient(45deg, #558B2F, #8BC34A);
    }
    
    .stream-lang {
      background: linear-gradient(45deg, #E64A19, #FF5722);
    }

    /* الأقسام المنسدلة */
    .collapsible-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.5s ease-out;
    }

    .collapsible-content.show {
      max-height: 10000px; /* قيمة كبيرة لضمان عرض كل المحتوى */
    }

    .grade-header {
      cursor: pointer;
    }

    .grade-icon {
      transition: transform 0.3s ease;
    }

    .grade-header.active .grade-icon {
      transform: rotate(180deg);
    }
    
    /* قائمة المواد المنسدلة */
    .subject-header {
      cursor: pointer;
      user-select: none;
    }
    
    .subject-icon-dropdown {
      transition: transform 0.3s ease;
    }
    
    .subject-header.active .subject-icon-dropdown {
      transform: rotate(90deg);
    }
    
    .subject-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease-out;
    }
    
    .subject-content.show {
      max-height: 1000px;
    }

    /* تأثيرات جديدة */
    .rainbow-text {
      animation: rainbow-text 5s linear infinite;
    }

    .floating-icon {
      animation: float 6s ease-in-out infinite;
    }

    .color-shift-bg {
      background: linear-gradient(270deg, #5D5CDE, #E91E63, #00BCD4, #4CAF50);
      background-size: 400% 400%;
      animation: color-shift 8s linear infinite;
    }

    .glow-effect {
      box-shadow: 0 0 15px rgba(93, 92, 222, 0.5);
      transition: box-shadow 0.3s ease;
    }

    .glow-effect:hover {
      box-shadow: 0 0 25px rgba(93, 92, 222, 0.8);
    }

    .pulse-effect {
      animation: pulse 2s infinite;
    }

    .hover-grow {
      transition: transform 0.3s ease;
    }

    .hover-grow:hover {
      transform: scale(1.05);
    }

    /* تأثيرات النص */
    .text-gradient {
      background: linear-gradient(90deg, #5D5CDE, #E91E63);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    /* تأثيرات الأزرار */
    .btn-hover-effect {
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .btn-hover-effect::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.1);
      transform: translateX(-100%);
      transition: transform 0.3s ease;
    }

    .btn-hover-effect:hover::after {
      transform: translateX(0);
    }

    /* تأثيرات البطاقات */
    .card-glow {
      transition: box-shadow 0.3s ease;
    }

    .card-glow:hover {
      box-shadow: 0 10px 30px rgba(93, 92, 222, 0.3);
    }

    /* تأثيرات الإطارات */
    .border-animation {
      position: relative;
    }

    .border-animation::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      border: 2px solid transparent;
      border-radius: inherit;
      background: linear-gradient(90deg, #5D5CDE, #E91E63) border-box;
      -webkit-mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
      -webkit-mask-composite: destination-out;
      mask-composite: exclude;
      transition: all 0.3s ease;
    }

    .border-animation:hover::before {
      transform: scale(1.02);
    }
  </style>
</head>
<body class="bg-secondary text-gray-800 dark:bg-dark-background dark:text-gray-100 min-h-screen flex flex-col">

  <!-- التحقق من وضع الظلام -->
  <script>
    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
      document.documentElement.classList.add('dark');
    }
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
      if (event.matches) {
        document.documentElement.classList.add('dark');
      } else {
        document.documentElement.classList.remove('dark');
      }
    });
  </script>

  <!-- القسم العلوي -->
  <header class="bg-gradient-to-r from-primary-600 to-primary-700 text-white shadow-lg dark:from-primary-800 dark:to-primary-900 dark:border-b dark:border-gray-700 animate-fade-in">
    <div class="container mx-auto flex justify-between items-center p-4">
      <div class="flex items-center">
        <div class="text-2xl font-bold md:text-3xl flex items-center">
          <i class="fas fa-university text-3xl ml-2 animate-bounce-slow floating-icon"></i>
          <span class="hidden md:inline text-gradient">منصة التعليم الجزائري</span>
          <span class="md:hidden text-gradient">التعليم الجزائري</span>
        </div>
      </div>
      <div class="flex items-center space-x-4 space-x-reverse">
        <button id="darkModeToggle" class="p-2 rounded-full hover:bg-white/20 transition-all duration-300 glow-effect">
          <i class="fas fa-moon text-xl dark:hidden"></i>
          <i class="fas fa-sun text-xl hidden dark:block"></i>
        </button>
        <button onclick="logoutUser()" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-all duration-300 btn-hover-effect">
          <i class="fas fa-sign-out-alt ml-2"></i>
          <span>تسجيل الخروج</span>
        </button>
      </div>
    </div>
    <div class="container mx-auto px-4 py-3 bg-white/10 dark:bg-gray-800/20 flex justify-between items-center">
      <h1 class="text-xl md:text-2xl font-bold flex items-center">
        <i class="fas fa-graduation-cap ml-2 text-yellow-300 floating-icon"></i>
        <span class="text-gradient">الطور الثانوي</span>
      </h1>
      <div class="flex items-center space-x-2 space-x-reverse">
        <a href="index.html" class="hover:underline text-sm md:text-base flex items-center group">
          <i class="fas fa-home ml-1 group-hover:animate-bounce"></i>
          <span class="group-hover:text-primary-300 transition-colors">الرئيسية</span>
        </a>
        <span class="text-white/70">/</span>
        <span class="text-sm md:text-base">الطور الثانوي</span>
      </div>
    </div>
  </header>

  <!-- بانر ترحيبي -->
  <div class="container mx-auto p-4 animate-scale-in">
    <div class="bg-gradient-to-r from-primary-100 to-indigo-100 dark:from-primary-900/40 dark:to-indigo-900/40 rounded-xl p-6 shadow-md mb-8 card-glow hover-grow">
      <div class="flex flex-col md:flex-row items-center justify-between">
        <div class="mb-4 md:mb-0 md:mr-6">
          <h2 class="text-2xl font-bold text-primary-700 dark:text-primary-300 mb-2">مرحباً بكم في منصة الطور الثانوي</h2>
          <p class="text-gray-700 dark:text-gray-300">اكتشف مجموعة شاملة من المواد التعليمية والموارد لجميع مستويات وشعب الطور الثانوي</p>
        </div>
        <div class="flex-shrink-0">
          <div class="w-24 h-24 bg-primary-600 rounded-full flex items-center justify-center text-white shadow-lg glow-effect">
            <i class="fas fa-book-reader text-4xl animate-pulse-slow floating-icon"></i>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- قسم البحث -->
  <div class="container mx-auto p-4 animate-slide-in">
    <div class="relative mb-6">
      <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
        <i class="fas fa-search text-primary-600 dark:text-primary-400"></i>
      </div>
      <input 
        type="text" 
        id="searchInput" 
        class="block w-full p-4 pr-10 text-base text-gray-900 border border-gray-300 rounded-lg bg-white focus:ring-primary-600 focus:border-primary-600 transition-all duration-300 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white shadow-sm hover-grow" 
        placeholder="ابحث عن الملفات والمواد..."
      >
      <div class="absolute inset-y-0 left-0 flex space-x-2 space-x-reverse px-3 items-center">
        <span id="searchCounter" class="text-xs bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 px-2 py-1 rounded-full hidden transition-all">0 نتيجة</span>
        <button id="clearSearch" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hidden">
          <i class="fas fa-times-circle"></i>
        </button>
      </div>
    </div>
  </div>

  <!-- المحتوى الرئيسي -->
  <main class="container mx-auto px-4 pb-10 flex-grow">
    <!-- شريط المستويات - عرض أفقي في النسخة المحمولة -->
    <div class="flex flex-nowrap overflow-x-auto py-2 mb-6 md:hidden gap-2 scrollbar-hide pb-4 animate-fade-in">
      <a href="#first-year" class="flex-shrink-0 py-2 px-4 bg-blue-100 text-blue-700 rounded-full flex items-center hover:bg-blue-200 transition-all dark:bg-blue-900/40 dark:text-blue-300 dark:hover:bg-blue-800/60 hover-grow">
        <i class="fas fa-user-graduate text-blue-500 ml-1"></i>
        <span>السنة الأولى</span>
      </a>
      <a href="#second-year" class="flex-shrink-0 py-2 px-4 bg-teal-100 text-teal-700 rounded-full flex items-center hover:bg-teal-200 transition-all dark:bg-teal-900/40 dark:text-teal-300 dark:hover:bg-teal-800/60 hover-grow">
        <i class="fas fa-user-graduate text-teal-500 ml-1"></i>
        <span>السنة الثانية</span>
      </a>
      <a href="#third-year" class="flex-shrink-0 py-2 px-4 bg-purple-100 text-purple-700 rounded-full flex items-center hover:bg-purple-200 transition-all dark:bg-purple-900/40 dark:text-purple-300 dark:hover:bg-purple-800/60 hover-grow">
        <i class="fas fa-user-graduate text-purple-500 ml-1"></i>
        <span>السنة الثالثة</span>
      </a>
    </div>

    <!-- بطاقات المستويات - عرض للشاشات المتوسطة وما فوق -->
    <div class="hidden md:grid md:grid-cols-3 gap-6 mb-8 animate-scale-in">
      <a href="#first-year" id="first-year-card" class="grade-card grade-1 rounded-xl shadow-lg p-6 flex flex-col items-center justify-center text-white min-h-40 card-hover transition-all hover-grow">
        <div class="text-5xl mb-4 floating-icon"><i class="fas fa-user-graduate"></i></div>
        <h3 class="text-xl font-bold grade-title">السنة الأولى ثانوي</h3>
      </a>
      <a href="#second-year" id="second-year-card" class="grade-card grade-2 rounded-xl shadow-lg p-6 flex flex-col items-center justify-center text-white min-h-40 card-hover transition-all hover-grow">
        <div class="text-5xl mb-4 floating-icon"><i class="fas fa-user-graduate"></i></div>
        <h3 class="text-xl font-bold grade-title">السنة الثانية ثانوي</h3>
      </a>
      <a href="#third-year" id="third-year-card" class="grade-card grade-3 rounded-xl shadow-lg p-6 flex flex-col items-center justify-center text-white min-h-40 card-hover transition-all hover-grow">
        <div class="text-5xl mb-4 floating-icon"><i class="fas fa-user-graduate"></i></div>
        <h3 class="text-xl font-bold grade-title">السنة الثالثة ثانوي</h3>
      </a>
    </div>

    <!-- تصنيف المحتويات حسب السنوات -->
    <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
      
      <!-- قسم السنة الأولى ثانوي -->
      <div id="first-year" class="bg-white rounded-lg shadow-md overflow-hidden dark:bg-dark-secondary border border-gray-100 dark:border-gray-700 card-hover animate-slide-in hover-grow">
        <div class="bg-gradient-to-r from-blue-500 to-blue-600 text-white p-4 font-bold text-lg flex items-center justify-between grade-header" data-target="firstYearLinks">
          <div class="flex items-center">
            <div class="subject-icon folder ml-2 floating-icon">
              <i class="fas fa-user-graduate"></i>
            </div>
            <span>السنة الأولى ثانوي</span>
          </div>
          <i class="fas fa-chevron-down grade-icon"></i>
        </div>
        <div class="collapsible-content" id="firstYearLinks">
          <div class="p-4 border-t border-gray-100 dark:border-gray-700">
            <ul class="divide-y divide-gray-200 dark:divide-gray-700" id="firstYearSubjects">
              <li class="p-2 text-center text-gray-400 dark:text-gray-500">
                <i class="fas fa-circle-notch fa-spin mr-2"></i> جاري تحميل المحتوى...
              </li>
            </ul>
          </div>
        </div>
      </div>

      <!-- قسم السنة الثانية ثانوي -->
      <div id="second-year" class="bg-white rounded-lg shadow-md overflow-hidden dark:bg-dark-secondary border border-gray-100 dark:border-gray-700 card-hover animate-slide-in hover-grow">
        <div class="bg-gradient-to-r from-teal-500 to-teal-600 text-white p-4 font-bold text-lg flex items-center justify-between grade-header" data-target="secondYearLinks">
          <div class="flex items-center">
            <div class="subject-icon folder ml-2 floating-icon">
              <i class="fas fa-user-graduate"></i>
            </div>
            <span>السنة الثانية ثانوي</span>
          </div>
          <i class="fas fa-chevron-down grade-icon"></i>
        </div>
        <div class="collapsible-content" id="secondYearLinks">
          <div class="p-4 border-t border-gray-100 dark:border-gray-700">
            <ul class="divide-y divide-gray-200 dark:divide-gray-700" id="secondYearSubjects">
              <li class="p-2 text-center text-gray-400 dark:text-gray-500">
                <i class="fas fa-circle-notch fa-spin mr-2"></i> جاري تحميل المحتوى...
              </li>
            </ul>
          </div>
        </div>
      </div>

      <!-- قسم السنة الثالثة ثانوي -->
      <div id="third-year" class="bg-white rounded-lg shadow-md overflow-hidden dark:bg-dark-secondary border border-gray-100 dark:border-gray-700 card-hover animate-slide-in hover-grow" style="animation-delay: 0.1s">
        <div class="bg-gradient-to-r from-purple-500 to-purple-600 text-white p-4 font-bold text-lg flex items-center justify-between grade-header" data-target="thirdYearLinks">
          <div class="flex items-center">
            <div class="subject-icon folder ml-2 floating-icon">
              <i class="fas fa-user-graduate"></i>
            </div>
            <span>السنة الثالثة ثانوي</span>
          </div>
          <i class="fas fa-chevron-down grade-icon"></i>
        </div>
        <div class="collapsible-content" id="thirdYearLinks">
          <div class="p-4 border-t border-gray-100 dark:border-gray-700">
            <ul class="divide-y divide-gray-200 dark:divide-gray-700" id="thirdYearSubjects">
              <li class="p-2 text-center text-gray-400 dark:text-gray-500">
                <i class="fas fa-circle-notch fa-spin mr-2"></i> جاري تحميل المحتوى...
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- نتائج البحث -->
    <div id="searchResults" class="hidden mt-8 bg-white rounded-lg shadow-md overflow-hidden dark:bg-dark-secondary border border-gray-100 dark:border-gray-700 animate-scale-in">
      <div class="bg-gradient-to-r from-primary-600 to-primary-700 text-white p-4 font-bold text-lg flex items-center justify-between">
        <div class="flex items-center">
          <div class="subject-icon folder ml-2">
            <i class="fas fa-search"></i>
          </div>
          <span>نتائج البحث</span>
        </div>
        <button id="closeSearch" class="text-white hover:text-red-200 p-1 rounded-full hover:bg-white/10 transition-all">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div id="resultsContainer" class="p-3 divide-y divide-gray-200 dark:divide-gray-700">
        <div class="text-center p-8 text-gray-500 dark:text-gray-400 hidden" id="noResultsMessage">
          <i class="fas fa-search text-4xl mb-3 text-gray-300 dark:text-gray-600"></i>
          <p class="font-medium">لا توجد نتائج مطابقة</p>
          <p class="text-sm mt-2">يرجى تغيير معايير البحث أو المحاولة بكلمات مفتاحية أخرى</p>
        </div>
        <div class="hidden" id="loadingResults">
          <div class="flex items-center justify-center p-8">
            <i class="fas fa-circle-notch fa-spin text-primary-600 dark:text-primary-400 text-2xl mr-3"></i>
            <span class="text-gray-600 dark:text-gray-300">جاري البحث...</span>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- القسم السفلي -->
  <footer class="bg-white dark:bg-gray-800 py-8 text-center border-t dark:border-gray-700 mt-auto">
    <div class="container mx-auto px-4">
      <div class="flex flex-col md:flex-row justify-between items-center">
        <div class="mb-4 md:mb-0">
          <div class="flex items-center justify-center md:justify-start">
            <i class="fas fa-university text-primary-600 dark:text-primary-400 text-2xl ml-2 floating-icon"></i>
            <span class="text-gray-700 dark:text-gray-300 font-bold text-lg">منصة التعليم الجزائري</span>
          </div>
          <p class="text-gray-600 dark:text-gray-400 text-sm mt-2">منصة تعليمية شاملة للطور الثانوي</p>
        </div>
        <div class="flex flex-wrap justify-center gap-4">
          <a href="index.html" class="text-gray-600 hover:text-primary-600 dark:text-gray-400 dark:hover:text-primary-400 transition-all">
            <i class="fab fa-facebook text-xl"></i>
          </a>
          <a href="index.html" class="text-gray-600 hover:text-primary-600 dark:text-gray-400 dark:hover:text-primary-400 transition-all">
            <i class="fab fa-twitter text-xl"></i>
          </a>
          <a href="index.html" class="text-gray-600 hover:text-primary-600 dark:text-gray-400 dark:hover:text-primary-400 transition-all">
            <i class="fab fa-youtube text-xl"></i>
          </a>
          <a href="index.html" class="text-gray-600 hover:text-primary-600 dark:text-gray-400 dark:hover:text-primary-400 transition-all">
            <i class="fab fa-telegram text-xl"></i>
          </a>
        </div>
      </div>
      <div class="mt-6 pt-4 border-t border-gray-200 dark:border-gray-700">
        <p class="text-gray-600 dark:text-gray-400">&copy; 2025 منصة التعليم الجزائري - جميع الحقوق محفوظة</p>
      </div>
    </div>
  </footer>

  <!-- زر العودة للأعلى -->
  <button id="scrollToTop" class="fixed bottom-6 left-6 bg-primary-600 text-white rounded-full w-12 h-12 flex items-center justify-center shadow-lg opacity-0 invisible transition-all duration-300 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-400 z-50 dark:bg-primary-700 dark:hover:bg-primary-600">
    <i class="fas fa-arrow-up"></i>
  </button>

  <!-- جافاسكريبت للوظائف -->
  <script>
    // بيانات الروابط الكاملة
    const allLinks = [
      { path: "الطور الثانوي", label: "الطور الثانوي" },
      { path: "الطور الثانوي/التاريخ و الجغرافيا الثالثة ثانوي - جميع الشعب", label: "التاريخ و الجغرافيا الثالثة ثانوي - جميع الشعب" },
      { path: "الطور الثانوي/التاريخ و الجغرافيا الثالثة ثانوي - جميع الشعب/دروس", label: "دروس" },
      { path: "الطور الثانوي/الرياضيات الأولى ثانوي - ج م آداب", label: "الرياضيات الأولى ثانوي - ج م آداب" },
      { path: "الطور الثانوي/الرياضيات الأولى ثانوي - ج م آداب/اختبارات", label: "اختبارات" },
      { path: "الطور الثانوي/الرياضيات الأولى ثانوي - ج م آداب/التدرجات الشهرية و السنوية", label: "التدرجات الشهرية و السنوية" },
      { path: "الطور الثانوي/الرياضيات الأولى ثانوي - ج م آداب/تمارين", label: "تمارين" },
      { path: "الطور الثانوي/الرياضيات الأولى ثانوي - ج م آداب/فروض", label: "فروض" },
      { path: "الطور الثانوي/الرياضيات الأولى ثانوي - ج م آداب/واجبات منزلية", label: "واجبات منزلية" },
      { path: "الطور الثانوي/الرياضيات الأولى ثانوي - ج م علوم و تكنولوجيا", label: "الرياضيات الأولى ثانوي - ج م علوم و تكنولوجيا" },
      { path: "الطور الثانوي/الرياضيات الأولى ثانوي - ج م علوم و تكنولوجيا/اختبارات", label: "اختبارات" },
      { path: "الطور الثانوي/الرياضيات الأولى ثانوي - ج م علوم و تكنولوجيا/التدرجات الشهرية و السنوية", label: "التدرجات الشهرية و السنوية" },
      { path: "الطور الثانوي/الرياضيات الأولى ثانوي - ج م علوم و تكنولوجيا/تقويمات تشخيصية", label: "تقويمات تشخيصية" },
      // وهكذا لباقي الروابط
    ];

    // دالة للحصول على الأيقونة والصنف المناسبين حسب المحتوى
    function getIconAndClass(path) {
      const segments = path.split('/');
      const lastSegment = segments[segments.length - 1].toLowerCase();
      const fullPath = path.toLowerCase();
      
      if (fullPath.includes('رياضيات')) return { icon: 'fas fa-square-root-alt', cssClass: 'math' };
      if (fullPath.includes('عربية') || fullPath.includes('آدابها')) return { icon: 'fas fa-language', cssClass: 'arabic' };
      if (fullPath.includes('إسلامية')) return { icon: 'fas fa-mosque', cssClass: 'islamic' };
      if (fullPath.includes('مدنية') || fullPath.includes('فلسفة')) return { icon: 'fas fa-brain', cssClass: 'philosophy' };
      if (fullPath.includes('تسيير') || fullPath.includes('اقتصاد')) return { icon: 'fas fa-chart-line', cssClass: 'economy' };
      if (fullPath.includes('علمية') || fullPath.includes('طبيعة') || fullPath.includes('حياة')) return { icon: 'fas fa-dna', cssClass: 'biology' };
      if (fullPath.includes('فيزيائية')) return { icon: 'fas fa-atom', cssClass: 'physics' };
      if (fullPath.includes('تاريخ') || fullPath.includes('جغرافيا')) return { icon: 'fas fa-globe', cssClass: 'history' };
      if (fullPath.includes('تكنولوجيا') || fullPath.includes('تقني')) return { icon: 'fas fa-cogs', cssClass: 'science' };
      if (fullPath.includes('إنجليزية')) return { icon: 'fas fa-globe-americas', cssClass: 'english' };
      if (fullPath.includes('فرنسية')) return { icon: 'fas fa-language', cssClass: 'french' };
      if (fullPath.includes('اختبارات')) return { icon: 'fas fa-clipboard-check', cssClass: 'test' };
      if (fullPath.includes('واجبات')) return { icon: 'fas fa-home', cssClass: 'homework' };
      if (fullPath.includes('دروس')) return { icon: 'fas fa-book', cssClass: 'doc' };
      if (fullPath.includes('مذكرات')) return { icon: 'fas fa-sticky-note', cssClass: 'doc' };
      if (fullPath.includes('وثائق')) return { icon: 'fas fa-file-alt', cssClass: 'doc' };
      if (fullPath.includes('ملفات')) return { icon: 'fas fa-folder', cssClass: 'folder' };
      if (fullPath.includes('تمارين') || fullPath.includes('فروض')) return { icon: 'fas fa-pen', cssClass: 'test' };
      if (fullPath.includes('تدرجات')) return { icon: 'fas fa-list-ol', cssClass: 'doc' };
      
      // أيقونة افتراضية للمسارات الأخرى
      return { icon: 'fas fa-folder', cssClass: 'folder' };
    }

    // تهيئة الصفحة
    document.addEventListener('DOMContentLoaded', function() {
      // تجميع الروابط حسب السنة الدراسية
      populateLinks();
      
      // إعداد معالجات الأحداث
      setupEventListeners();
      
      // محاكاة تأخير تحميل
      simulateLoading();
      
      // التحقق من حالة المستخدم
      checkUserStatus();
    });
    
    // محاكاة تحميل المحتوى
    function simulateLoading() {
      // تأخير تحميل الروابط لمحاكاة تجربة تحميل أكثر واقعية
      setTimeout(() => {
        document.querySelectorAll('.p-2.text-center.text-gray-400').forEach(el => {
          el.parentNode.removeChild(el);
        });
      }, 800);
    }
    
    // التحقق من حالة المستخدم
    function checkUserStatus() {
      const currentUser = JSON.parse(localStorage.getItem("currentUser") || "null");
      const authToken = sessionStorage.getItem("authToken");
      
      if (!currentUser || !authToken) {
        window.location.href = "login.html";
        return;
      }
      
      if (currentUser && currentUser.username === "latifking" && currentUser.password === "ding2010") {
        // حالة الأدمن - لا شيء إضافي للتحقق
        return;
      }
      
      if (currentUser && !currentUser.approved) {
        window.location.href = "not-approved.html";
      }
    }
    
    // تسجيل الخروج
    function logoutUser() {
      localStorage.removeItem("currentUser");
      sessionStorage.removeItem("authToken");
      sessionStorage.removeItem("lastAuth");
      sessionStorage.removeItem("redirected");
      window.location.href = "login.html";
    }

    function populateLinks() {
      // حصر الروابط حسب السنة الدراسية
      const firstYearLinks = allLinks.filter(link => 
        link.path.includes('الأولى ثانوي') && 
        link.path.split('/').length === 3
      );
      
      const secondYearLinks = allLinks.filter(link => 
        link.path.includes('الثانية ثانوي') && 
        link.path.split('/').length === 3
      );
      
      const thirdYearLinks = allLinks.filter(link => 
        link.path.includes('الثالثة ثانوي') && 
        link.path.split('/').length === 3
      );
      
      // إضافة الروابط إلى الأقسام المناسبة
      addSubjectsToContainer(firstYearLinks, 'firstYearSubjects');
      addSubjectsToContainer(secondYearLinks, 'secondYearSubjects');
      addSubjectsToContainer(thirdYearLinks, 'thirdYearSubjects');
    }
    
    function addSubjectsToContainer(subjects, containerId) {
      const container = document.getElementById(containerId);
      if (!container) return;
      
      // مسح محتوى التحميل
      container.innerHTML = '';
      
      if (subjects.length === 0) {
        container.innerHTML = '<li class="p-4 text-gray-500 dark:text-gray-400 text-center">لا توجد عناصر</li>';
        return;
      }
      
      // ترتيب المواد
      subjects.sort((a, b) => a.path.localeCompare(b.path));
      
      subjects.forEach((subject, index) => {
        const li = document.createElement('li');
        li.className = 'py-2';
        
        const subjectIconData = getIconAndClass(subject.path);
        
        // إنشاء عنصر المادة كعنوان قابل للنقر
        const subjectHeader = document.createElement('div');
        subjectHeader.className = 'subject-header flex items-center text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 group';
        subjectHeader.dataset.target = subject.label.replace(/\s+/g, '');
        
        subjectHeader.innerHTML = `
          <div class="subject-icon ${subjectIconData.cssClass} ml-2 group-hover:scale-110 transition-transform floating-icon">
            <i class="${subjectIconData.icon}"></i>
          </div>
          <span>${subject.label}</span>
          <i class="fas fa-chevron-left ml-auto subject-icon-dropdown"></i>
        `;
        
        // إنشاء محتوى المادة (القائمة المنسدلة)
        const subjectContent = document.createElement('div');
        subjectContent.className = 'subject-content';
        subjectContent.id = subject.label.replace(/\s+/g, '');
        
        // الحصول على المحتويات الفرعية للمادة
        const subItems = allLinks.filter(item => 
          item.path.startsWith(subject.path + '/') && 
          item.path.split('/').length === subject.path.split('/').length + 1
        );
        
        if (subItems.length > 0) {
          const subList = document.createElement('ul');
          subList.className = 'mr-6 mt-2 space-y-1';
          
          subItems.forEach(subItem => {
            const subIconData = getIconAndClass(subItem.path);
            const subLi = document.createElement('li');
            
            subLi.innerHTML = `
              <a href="file-browser.html?path=${encodeURIComponent(subItem.path)}" class="flex items-center text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 text-sm group">
                <div class="subject-icon ${subIconData.cssClass} w-8 h-8 ml-2 group-hover:scale-110 transition-transform">
                  <i class="${subIconData.icon} text-sm"></i>
                </div>
                <span>${subItem.label}</span>
                <i class="fas fa-arrow-left mr-auto text-gray-400 text-xs group-hover:animate-pulse"></i>
              </a>
            `;
            
            subList.appendChild(subLi);
          });
          
          subjectContent.appendChild(subList);
        } else {
          subjectContent.innerHTML = `
            <div class="mr-6 mt-2 text-center text-gray-500 dark:text-gray-400">
              لا توجد محتويات فرعية
            </div>
          `;
        }
        
        li.appendChild(subjectHeader);
        li.appendChild(subjectContent);
        container.appendChild(li);
        
        // إضافة معالج الحدث لفتح/إغلاق المادة
        subjectHeader.addEventListener('click', function() {
          this.classList.toggle('active');
          const content = this.nextElementSibling;
          content.classList.toggle('show');
        });
      });
    }

    function setupEventListeners() {
      // تبديل وضع الظلام
      document.getElementById('darkModeToggle').addEventListener('click', () => {
        document.documentElement.classList.toggle('dark');
      });
      
      // إضافة وظائف الأقسام المنسدلة
      const gradeHeaders = document.querySelectorAll('.grade-header');
      gradeHeaders.forEach(header => {
        header.addEventListener('click', () => {
          const targetId = header.getAttribute('data-target');
          const targetContent = document.getElementById(targetId);
          
          // تبديل حالة العرض للقسم
          header.classList.toggle('active');
          targetContent.classList.toggle('show');
        });
      });
      
      // وظيفة البحث
      const searchInput = document.getElementById('searchInput');
      const searchResults = document.getElementById('searchResults');
      const resultsContainer = document.getElementById('resultsContainer');
      const searchCounter = document.getElementById('searchCounter');
      const clearSearch = document.getElementById('clearSearch');
      const noResultsMessage = document.getElementById('noResultsMessage');
      const loadingResults = document.getElementById('loadingResults');
      const closeSearch = document.getElementById('closeSearch');
      
      // زر إغلاق البحث
      closeSearch.addEventListener('click', () => {
        searchResults.classList.add('hidden');
        searchInput.value = '';
        clearSearch.classList.add('hidden');
        searchCounter.classList.add('hidden');
      });
      
      // زر مسح البحث
      clearSearch.addEventListener('click', () => {
        searchInput.value = '';
        searchInput.focus();
        searchResults.classList.add('hidden');
        clearSearch.classList.add('hidden');
        searchCounter.classList.add('hidden');
      });
      
      searchInput.addEventListener('input', (e) => {
        const searchTerm = e.target.value.trim().toLowerCase();
        
        if (searchTerm.length < 2) {
          searchResults.classList.add('hidden');
          clearSearch.classList.add('hidden');
          searchCounter.classList.add('hidden');
          return;
        }
        
        // عرض أيقونة المسح
        clearSearch.classList.remove('hidden');
        
        // عرض حالة التحميل
        searchResults.classList.remove('hidden');
        noResultsMessage.classList.add('hidden');
        loadingResults.classList.remove('hidden');
        resultsContainer.querySelectorAll('.search-result-item').forEach(item => item.remove());
        
        // محاكاة تأخير البحث
        setTimeout(() => {
          // إجراء البحث
          const results = allLinks.filter(link => 
            link.path.toLowerCase().includes(searchTerm) || 
            link.label.toLowerCase().includes(searchTerm)
          );
          
          // إخفاء حالة التحميل
          loadingResults.classList.add('hidden');
          
          // تحديث عداد النتائج
          searchCounter.textContent = `${results.length} نتيجة`;
          searchCounter.classList.remove('hidden');
          
          if (results.length === 0) {
            noResultsMessage.classList.remove('hidden');
            return;
          }
          
          // عرض النتائج
          results.slice(0, 20).forEach((result, index) => {
            const resultItem = document.createElement('div');
            resultItem.className = 'py-3 hover:bg-gray-50 dark:hover:bg-gray-800/40 transition-all duration-300 search-result-item';
            
            const iconData = getIconAndClass(result.path);
            
            // تحويل المسار إلى نص أكثر قابلية للقراءة
            const readablePath = result.path.split('/').slice(1).join(' / ');
            
            // تحديد ما إذا كان هذا عنصرًا فرعيًا (مذكرات، اختبارات، الخ) أم عنصرًا رئيسيًا (مادة)
            const isSubItem = result.path.split('/').length > 3;
            
            if (isSubItem) {
              resultItem.innerHTML = `
                <a href="file-browser.html?path=${encodeURIComponent(result.path)}" class="flex items-start group">
                  <div class="subject-icon ${iconData.cssClass} ml-2 mt-1 group-hover:scale-110 transition-transform">
                    <i class="${iconData.icon}"></i>
                  </div>
                  <div class="flex-1">
                    <div class="font-medium text-gray-900 dark:text-gray-100 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors">${result.label}</div>
                    <div class="text-sm text-gray-500 dark:text-gray-400">${readablePath}</div>
                  </div>
                  <i class="fas fa-arrow-left text-gray-400 text-xs mt-1 group-hover:animate-pulse"></i>
                </a>
              `;
            } else {
              // إذا كان عنصرًا رئيسيًا (مادة)، لا نضيف رابطًا خارجيًا
              resultItem.innerHTML = `
                <div class="flex items-start">
                  <div class="subject-icon ${iconData.cssClass} ml-2 mt-1">
                    <i class="${iconData.icon}"></i>
                  </div>
                  <div class="flex-1">
                    <div class="font-medium text-gray-900 dark:text-gray-100">${result.label}</div>
                    <div class="text-sm text-gray-500 dark:text-gray-400">${readablePath}</div>
                  </div>
                </div>
              `;
            }
            
            resultsContainer.appendChild(resultItem);
          });
          
          // إضافة إشعار إذا كانت هناك نتائج أكثر
          if (results.length > 20) {
            const moreResults = document.createElement('div');
            moreResults.className = 'text-center p-2 text-gray-500 text-sm dark:text-gray-400 mt-2 bg-gray-50 dark:bg-gray-800/40 rounded-md';
            moreResults.textContent = `تم عرض 20 نتيجة من أصل ${results.length}. يرجى تحديد البحث أكثر للحصول على نتائج أدق.`;
            resultsContainer.appendChild(moreResults);
          }
        }, 500);
      });
      
      // إعادة تعيين العرض عند مسح البحث
      searchInput.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          searchInput.value = '';
          searchResults.classList.add('hidden');
          clearSearch.classList.add('hidden');
          searchCounter.classList.add('hidden');
        }
      });
      
      // زر العودة للأعلى
      const scrollToTopBtn = document.getElementById('scrollToTop');
      
      window.addEventListener('scroll', () => {
        if (window.pageYOffset > 300) {
          scrollToTopBtn.classList.remove('opacity-0', 'invisible');
          scrollToTopBtn.classList.add('opacity-100', 'visible');
        } else {
          scrollToTopBtn.classList.add('opacity-0', 'invisible');
          scrollToTopBtn.classList.remove('opacity-100', 'visible');
        }
      });
      
      scrollToTopBtn.addEventListener('click', () => {
        window.scrollTo({
          top: 0,
          behavior: 'smooth'
        });
      });
    }
  </script>

<!-- زر الأدمن السري -->
<button id="adminSecretBtn" style="display:none; position:fixed; bottom:20px; right:20px; background:#FFD700; color:#000; padding:10px 20px; border:none; border-radius:10px; font-weight:bold; cursor:pointer; z-index:999;" onclick="enterAdmin()">
  <i class="fas fa-crown mr-1"></i>
  لوحة تحكم الأدمن
</button>

<script>
  // متغيرات لتتبع عدد النقرات والتوقيت
  let adminClickCount = 0;
  let lastClickTime = 0;
  const clickTimeout = 2000; // 2 ثانية كحد أقصى بين النقرات
  
  document.addEventListener("click", function() {
    const currentTime = new Date().getTime();
    
    // إذا مر أكثر من 2 ثانية منذ آخر نقرة، نعيد العد
    if (currentTime - lastClickTime > clickTimeout) {
      adminClickCount = 0;
    }
    
    // زيادة العداد وتحديث وقت آخر نقرة
    adminClickCount++;
    lastClickTime = currentTime;
    
    // إذا وصلنا لـ20 نقرة متتالية
    if (adminClickCount >= 20) {
      document.getElementById("adminSecretBtn").style.display = "block";
      adminClickCount = 0; // نعيد العداد للصفر
      setTimeout(() => {
        document.getElementById("adminSecretBtn").style.display = "none";
      }, 5000); // إخفاء الزر بعد 5 ثواني
    }
  });

  // اختصار لوحة المفاتيح Alt + A
  document.addEventListener("keydown", function(e) {
    if (e.altKey && e.key.toLowerCase() === 'a') {
      document.getElementById("adminSecretBtn").style.display = "block";
      setTimeout(() => {
        document.getElementById("adminSecretBtn").style.display = "none";
      }, 5000);
    }
  });

  function enterAdmin() {
    const admin = { username: "latifking", password: "ding2010" };
    localStorage.setItem("currentUser", JSON.stringify(admin));
    sessionStorage.setItem("authToken", "admin-special-token");
    window.location.href = "admin-panel.html";
  }
</script>